<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[AKfycbxNk]</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            transition: background-color 0.3s ease;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <div class="bg-white p-8 rounded-lg shadow-xl max-w-lg w-full text-center">
        <h1 class="text-3xl font-bold mb-4 text-gray-800">Prueba de Conexión a Apps Script</h1>
        <p class="text-gray-600 mb-6">Abre la consola del navegador (F12) para ver la respuesta.
        <div id="status-message" class="bg-blue-100 text-blue-800 p-4 rounded-md">
            Cargando...
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const statusDiv = document.getElementById('status-message');
            
            // --- URL de la implementación de tu script ---
            // ¡Importante! La URL del modo de desarrollo (/dev) no permite CORS.
            // Para la aplicación en producción, necesitas la URL de ejecución (/exec).
            const url = 'https://script.google.com/macros/s/AKfycbxNk7NfZPdhXfJfHsk1ipfRavlTPyoW44NmWB34S-uqcWBPZH9L106-G5xdaKbook2g/exec'
            // -----------------------------------------------------------------

            if (url === 'TU_NUEVA_URL_AQUÍ') {
                statusDiv.classList.remove('bg-blue-100');
                statusDiv.classList.add('bg-yellow-100', 'text-yellow-800');
                statusDiv.textContent = 'Por favor, pega la URL de tu nuevo despliegue en el código.';
                return;
            }

            const datosAEnviar = {
                nombre: 'Alex',
                ciudad: 'Madrid'
            };

            const opciones = {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(datosAEnviar)
            };

            fetch(url, opciones)
                .then(respuesta => {
                    if (respuesta.ok) {
                        return respuesta.json(); 
                    }
                    throw new Error('Error en la solicitud: ' + respuesta.statusText);
                })
                .then(resultado => {
                    console.log('Respuesta del servidor:', resultado);
                    if (resultado.estado === 'éxito') {
                        statusDiv.classList.remove('bg-blue-100');
                        statusDiv.classList.add('bg-green-100', 'text-green-800');
                        statusDiv.textContent = '¡Conexión exitosa! Revisa la consola para la respuesta completa.';
                    } else {
                        statusDiv.classList.remove('bg-blue-100');
                        statusDiv.classList.add('bg-red-100', 'text-red-800');
                        statusDiv.textContent = `Error: ${resultado.mensaje}. Revisa la consola para más detalles.`;
                    }
                })
                .catch(error => {
                    console.error('Ha ocurrido un error:', error);
                    statusDiv.classList.remove('bg-blue-100');
                    statusDiv.classList.add('bg-red-100', 'text-red-800');
                    statusDiv.textContent = `Error: ${error.message}. Revisa la consola para más detalles.`;
                });
        });
    </script>
</body>
</html>
